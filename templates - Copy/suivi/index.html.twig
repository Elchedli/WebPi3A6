{% extends 'backend2/page.html.twig' %}
{% block stylesheets %}
    <link rel="stylesheet" href="{{asset("backend/chedli/acceuil.css")}}">

{#    <link rel="stylesheet" href="{{asset("backend/chedli/crud.css")}}">#}
{% endblock %}
{% block param %}
    <div id="dynamicbull">
        <table class="table" style="margin-top: 40px">
            <thead>
            <tr>
                <th>Identifiant</th>
                <th>Client</th>
                <th>Titre</th>
                <th>Date Debut</th>
                <th>Date Fin</th>
                <th>Temps Debut</th>
                <th>Temps Fin</th>
                <th>Actions</th>
            </tr>
            </thead>
            <tbody>
            {% for suivi in suivis %}
                <tr>
                    <td>{{ suivi.idS }}</td>
                    <td>{{ suivi.client }}</td>
                    <td>{{ suivi.titreS }}</td>
                    <td>{{ suivi.dateDs ? suivi.dateDs|date('Y-m-d') : '' }}</td>
                    <td>{{ suivi.dateFs ? suivi.dateFs|date('Y-m-d') : '' }}</td>
                    <td>{{ suivi.tempsDs ? suivi.tempsDs|date('H:i:s') : '' }}</td>
                    <td>{{ suivi.tempsFs ? suivi.tempsFs|date('H:i:s') : '' }}</td>
                    <td>
                        <a class="bozilla" href="{{ path('suivi_show', {'idS': suivi.idS}) }}" type="1">Afficher</a>
                        <a class="bozilla" href="{{ path('suivi_edit', {'idS': suivi.idS}) }}" type="2">Modifier</a>
                        <a class="bozilla" href="{{ path('suivi_delete', {'idS': suivi.idS}) }}" type="3">Supprimer</a>
                        {#                    <a href="{{ path('suivi_supp', {'idS': suivi.idS}) }}">Supprimer</a>#}
                    </td>
                </tr>
            {% else %}
                <tr>
                    <td colspan="7">no records found</td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>

    <a id="ajouterlabel" class="bozilla" href="{{ path('suivi_new') }}" style="display: table;margin: 0 auto;margin-top: 30px">Ajouter un nouveau client</a>
    <a id="ajouterlabel" class="bozilla" href="{{ path('export') }}" style="display: table;margin: 0 auto;margin-top: 30px"></a>
    <button class="btn btn-primary mt30 btn-black excel" style="display: table;margin: 0 auto">Exporter a excel</button>
    {#    <script>#}
    {#        $(".bozilla").click(function(e){#}
    {#            e.preventDefault();#}
    {#            let link = e.target.href;#}
    {#            $("#dynamicbull").load(link);#}
    {#        });#}

    {#    </script>#}
{% endblock %}
{% block javascripts %}
    <script src="{{ asset("//cdn.jsdelivr.net/npm/sweetalert2@10") }}"></script>
    <script src="{{asset("https://unpkg.com/axios/dist/axios.min.js")}}"></script>
    <script>

        $(".excel").click(function(){
            axios.get('/export').then(function (response) {
                Swal.fire({
                    position: 'top-end',
                    icon: 'success',
                    title: 'Ficher access créer',
                    showConfirmButton: false,
                    timer: 1500
                })
            });
        });

    </script>
    {% set notif = app.session.get('notif') %}
    {% if notif == "fait" %}
        <script>
            Swal.fire({
                position: 'top-end',
                icon: 'success',
                title: 'Un suivi a était ajouter',
                showConfirmButton: false,
                timer: 1500
            })
        </script>
     {% elseif notif == "echec" %}
        <script>
             Swal.fire({
             position: 'top-end',
             icon: 'error',
             title: 'Vous avez supprimer un suivi',
             showConfirmButton: false,
             timer: 1500
             })
        </script>
    {% endif %}
    {{ app.session.set('notif', '') }}

{% endblock %}
